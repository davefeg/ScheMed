@prefix log: <http://www.w3.org/2000/10/swap/log#>.
@prefix string: <http://www.w3.org/2000/10/swap/string#>.
@prefix func: <http://www.w3.org/2007/rif-builtin-function#>.
@prefix e: <http://eulersharp.sourceforge.net/2003/03swap/log-rules#>.
@prefix owl: <http://www.w3.org/2002/07/owl#>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix schema: <http://schema.org/> .
@prefix : <medicalEntity-to-rdfa#>.


### rules producing log:outputString

{	?U :header ?V.
} =>
{	"alfa" log:outputString ?V.
}.

{	?S a rdfs:Class.
	?S log:uri ?S1.
	(?S1 "#") func:substring-after ?S2.
	("""    <div typeof="rdfs:Class" resource="http://schema.org/""" ?S2 """">\n""") string:concatenation ?S3.
	("""      <span class="h" property="rdfs:label">""" ?S2 """</span>\n""") string:concatenation ?S4.
	?SCOPE e:optional
		{	?S rdfs:comment ?S5.
			("""      <span property="rdfs:comment">""" ?S5 """</span>\n""") string:concatenation ?S6.
		},
		{	?S6 log:equalTo "".
		}.
	?SCOPE e:findall (
		?O3
		{	?S rdfs:subClassOf ?O.
			?O log:uri ?O1.
			?SCOPE e:optional
				{	(?O1 "#") func:substring-after ?O2.
					("""      <span>Subclass of: <a property="rdfs:subClassOf" href="http://schema.org/""" ?O2 """">""" ?O2 """</a></span>\n""") string:concatenation ?O3.
				},
				{	("""      <span>Subclass of: <a property="rdfs:subClassOf" href=\"""" ?O1 """">""" ?O1 """</a></span>\n""") string:concatenation ?O3.
				}.
		}
		?L
	).
	?L string:concatenation ?S7.	
	(?S3 ?S4 ?S6 ?S7 """    </div>\n\n""") string:concatenation ?S8.
} =>
{	"beta" log:outputString ?S8.
}.

{	?S a rdf:Property.
	?S log:uri ?S1.
	(?S1 "#") func:substring-after ?S2.
	("""    <div typeof="rdf:Property" resource="http://schema.org/""" ?S2 """">\n""") string:concatenation ?S3.
	("""      <span class="h" property="rdfs:label">""" ?S2 """</span>\n""") string:concatenation ?S4.
	?SCOPE e:optional
		{	?S rdfs:comment ?S5.
			("""      <span property="rdfs:comment">""" ?S5 """</span>\n""") string:concatenation ?S6.
		},
		{	?S6 log:equalTo "".
		}.
	?SCOPE e:findall (
		?O1
		{	?S schema:domainIncludes ?O2.
			?O2 log:uri ?O3.
			?SCOPE e:optional
				{	(?O3 "#") func:substring-after ?O4.
					("""      <span>Domain: <a property="http://schema.org/domainIncludes" href="http://schema.org/""" ?O4 """">""" ?O4 """</a></span>\n""") string:concatenation ?O1.
				},
				{	("""      <span>Domain: <a property="http://schema.org/domainIncludes" href=\"""" ?O3 """">""" ?O3 """</a></span>\n""") string:concatenation ?O1.
				}.
		}
		?L1
	).
	?L1 string:concatenation ?S7.	
	?SCOPE e:findall (
		?O5
		{	?S schema:rangeIncludes ?O6.
			?O6 log:uri ?O7.
			?SCOPE e:optional
				{	(?O7 "#") func:substring-after ?O8.
					("""      <span>Range: <a property="http://schema.org/rangeIncludes" href="http://schema.org/""" ?O8 """">""" ?O8 """</a></span>\n""") string:concatenation ?O5.
				},
				{	("""      <span>Range: <a property="http://schema.org/rangeIncludes" href=\"""" ?O7 """">""" ?O7 """</a></span>\n""") string:concatenation ?O5.
				}.
		}
		?L2
	).
	?L2 string:concatenation ?S8.	
	?SCOPE e:findall (
		?O9
		{	?S rdfs:subPropertyOf ?O10.
			?O10 log:uri ?O11.
			?SCOPE e:optional
				{	(?O11 "#") func:substring-after ?O12.
					("""      <span>SubProperty of: <a property="rdfs:subPropertyOf" href="http://schema.org/""" ?O12 """">""" ?O12 """</a></span>\n""") string:concatenation ?O9.
				},
				{	("""      <span>SubProperty of: <a property="rdfs:subPropertyOf" href=\"""" ?O11 """">""" ?O11 """</a></span>\n""") string:concatenation ?O9.
				}.
		}
		?L3
	).
	?L3 string:concatenation ?S9.	
	(?S3 ?S4 ?S6 ?S7 ?S8 ?S9 """    </div>\n\n""") string:concatenation ?S10.
} =>
{	"gamma" log:outputString ?S10.
}.

{	?U :footer ?V.
} =>
{	"omega" log:outputString ?V.
}.


### support

{?S a owl:Class} => {?S a rdfs:Class}.
{?S a owl:DatatypeProperty} => {?S a rdf:Property}.
{?S a owl:ObjectProperty} => {?S a rdf:Property}.


### header

:medicalEntity :header """<!DOCTYPE html>
<html>
  <head>
    <title>medicalEntity schema</title>
    <meta charset="UTF-8" />
    <style type="text/css">
      span.h {
        padding-left: 0px;
        font-weight: bold;
      }
      span {
        display: block;
        padding-left: 10px;
      }
    </style>
  </head>

  <body>
    <h1>medicalEntity schema</h1>
    <p>This is an RDFa representation of medicalEntity.
    </p>
    <hr />
""".

### footer

:medicalEntity :footer """  </body>
</html>
""".
